<?phpfunction api_call($method, $url, $data, $safemode = true){	if($method == 'POST'){$file = http_post($url, $data);}	else if($method == 'GET'){$file = http_get($url, $data);}	else{$file = false;}		if($file){		$result = json_decode($file, true);		$status_code = isset($result['status']['code']) ? $result['status']['code'] : null;		if($status_code == 200){			return $result;		}		else if($status_code == 402 && $safemode == true){			header('Location: 402.php?sec='.$result['info']['next_restart']); // trop de requêtes...			exit;		}	}		if($safemode == true){		header('Location: 404.php');		exit;	}}// privatefunction http_post($url, $data){	$data_url = http_build_query($data);	$data_len = strlen ($data_url);	return file_get_contents($url, false, 			stream_context_create(				array(					'http'=>array(						'method'=>	'POST',						'header'=>	"Connection: close\r\n".									"Content-Type: application/x-www-form-urlencoded\r\n". 									"Content-Length: ".$data_len."\r\n",						'content'=>	$data_url					)						)			)		);}// privatefunction http_get($url, $data){	$params = '';	if($data != null){		$cpt = 0;		foreach($data as $key => $value){			if($cpt == 0){$params .= '?'.$key.'='.$value;}			else{$params .= '&'.$key.'='.$value;}			$cpt++;		}	}	return file_get_contents($url.$params);}?>